<view class="container">
  
  <view class="header-card">
    <view class="header-top">
      <view class="label">å½“å‰å¯ç”¨ç§¯åˆ†</view>
      <view class="history-btn" bindtap="onGoToHistory">ç§¯åˆ†æ˜ç»† ></view>
    </view>
    <view class="points-num">{{myPoints}}</view>
    <view class="header-bottom">
      <view class="tips">ç§¯åˆ†æœ‰æ•ˆæœŸï¼šè‡ªè·å–ä¹‹æ—¥èµ·1å¹´å†…æœ‰æ•ˆ</view>
    </view>
  </view>

  <view class="section-title">
    <text class="icon">âœ¨</text>
    <text class="text">ä¼šå‘˜ä¸“äº«ç¤¼é‡</text>
  </view>

  <view class="grid">
    <view class="card" wx:for="{{giftList}}" wx:key="id">
      <view class="img-box">
        <image wx:if="{{item.image}}" src="{{item.image}}" mode="aspectFill"></image>
        <view wx:else class="no-img-text">Gift</view>
        <view class="stock-tag" wx:if="{{item.stock < 10}}">ä»…å‰©{{item.stock}}ä»¶</view>
      </view>
      
      <view class="info">
        <view class="name">{{item.name}}</view>
        <view class="price-row">
          <text class="diamond">ğŸ’</text>
          <text class="cost">{{item.points}}</text>
        </view>
      </view>

      <button 
        class="btn-redeem {{myPoints < item.points ? 'disabled' : ''}}" 
        bindtap="onRedeem" 
        data-item="{{item}}"
      >
        {{myPoints < item.points ? 'ç§¯åˆ†ä¸è¶³' : 'ç«‹å³å…‘æ¢'}}
      </button>
    </view>
  </view>
</view>